{% extends "layouts/nav_app_honey.html" %}

{% block main_link_css %}
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/styles_restaurant/notifications.css') }}">
{% endblock %}

{% block main_body %}
    <div class="container-fluid-block">                
        <div class="title-page">
            <h1>Mis notificaciones</h1>
        </div>      
        <div class="container-all-notifications">
            {% if JobsApp %}
            {% for jobApp in JobsApp  %}
            
                <div class="block-container-main-notifications">
                    <div class="notificacion-header-request">
                        <div class="container-image">
                            <img src="{{ jobApp.admin_image }}" alt="Perfil">
                        </div>
                        <div class="container-text">
                            <h5 class=""><a href="#" class="">{{ jobApp.admin_name }} {{ jobApp.admin_surnames}}</a> </h5>
                            <span>{{ jobApp.company_name }}</span>
                        </div>
                    </div>
                    <div class="notificacion-body-request">
                        <div class="block-p-1">
                            <div class="block-p-2">
                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24"><path fill="currentColor" d="M22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6m-2 0l-8 5l-8-5h16m0 12H4V8l8 5l8-5v10Z"/></svg>
                            </div>
                            <span class="">{{ jobApp.admin_email }}</span>
                        </div>
                        <div class="block-p-1">
                            <div class="block-p-2">
                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 16 16"><path fill="currentColor" d="M13.601 2.326A7.854 7.854 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.933 7.933 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.898 7.898 0 0 0 13.6 2.326zM7.994 14.521a6.573 6.573 0 0 1-3.356-.92l-.24-.144l-2.494.654l.666-2.433l-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931a6.557 6.557 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592zm3.615-4.934c-.197-.099-1.17-.578-1.353-.646c-.182-.065-.315-.099-.445.099c-.133.197-.513.646-.627.775c-.114.133-.232.148-.43.05c-.197-.1-.836-.308-1.592-.985c-.59-.525-.985-1.175-1.103-1.372c-.114-.198-.011-.304.088-.403c.087-.088.197-.232.296-.346c.1-.114.133-.198.198-.33c.065-.134.034-.248-.015-.347c-.05-.099-.445-1.076-.612-1.47c-.16-.389-.323-.335-.445-.34c-.114-.007-.247-.007-.38-.007a.729.729 0 0 0-.529.247c-.182.198-.691.677-.691 1.654c0 .977.71 1.916.81 2.049c.098.133 1.394 2.132 3.383 2.992c.47.205.84.326 1.129.418c.475.152.904.129 1.246.08c.38-.058 1.171-.48 1.338-.943c.164-.464.164-.86.114-.943c-.049-.084-.182-.133-.38-.232z"/></svg>
                            </div>
                            <span class="">{{ jobApp.admin_number }}</span>
                        </div>
                        <div class="block-p-1">
                            <div class="block-p-2">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="currentColor" d="M12 12q.825 0 1.413-.588T14 10q0-.825-.588-1.413T12 8q-.825 0-1.413.588T10 10q0 .825.588 1.413T12 12Zm0 7.35q3.05-2.8 4.525-5.088T18 10.2q0-2.725-1.738-4.462T12 4Q9.475 4 7.737 5.738T6 10.2q0 1.775 1.475 4.063T12 19.35ZM12 22q-4.025-3.425-6.012-6.362T4 10.2q0-3.75 2.413-5.975T12 2q3.175 0 5.588 2.225T20 10.2q0 2.5-1.988 5.438T12 22Zm0-12Z"/></svg>
                            </div>
                            <span class="">{{ jobApp.company_location }}</span>
                        </div>
                    </div>
                    <div class="notificacion-footer-request">
                        <button class="button-approve-request" data-identifier="{{ jobApp.id }}">Aceptar</button>
                        <button class="button-reject-request" data-identifier="{{ jobApp.id }}">Rechazar</button>
                    </div>
                </div>
            
            {% endfor %}
            {% else %}
            <div class="w-100 text-center">
                <!-- <span>No se encontró notificaciones</span> -->
            </div>
            {% endif %}
        </div><!--end row-->

        <!-- NOTIFICACIONES GENERAL -->
        {% if notifications %}
        <div class="container-all-notifications">
            {% for notification in notifications  %}
            <div class="block-container-main-notifications">
                <div class="notificacion-header">
                    <div class="block-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="#fe8c01" d="M4 19v-2h2v-7q0-2.075 1.25-3.687T10.5 4.2v-.7q0-.625.438-1.062T12 2q.625 0 1.063.438T13.5 3.5v.7q2 .5 3.25 2.113T18 10v7h2v2zm8 3q-.825 0-1.412-.587T10 20h4q0 .825-.587 1.413T12 22M2 10q0-2.5 1.113-4.587T6.1 1.95l1.175 1.6q-1.5 1.1-2.387 2.775T4 10zm18 0q0-2-.888-3.675T16.726 3.55l1.175-1.6q1.875 1.375 2.988 3.463T22 10z"/></svg>
                    </div>
                    <div class="block-text">
                        <span>{{ notification.data_sender.name_sender}}</span>
                    </div>
                </div>
                <div class="notificacion-body">
                    <div class="block-image">
                        <img src="{{ notification.data_sender.image_profile}}" alt="Perfil">
                    </div>
                    <div class="block-text">
                        <strong>{{ notification.title }}</strong><br>
                        <span>{{ notification.text }}</span>
                    </div>
                </div>
                <div class="notificacion-footer">
                    <button class="delete-btn-notification" data-row="{{ notification.id }}">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 256 256"><path fill="#ffffff" d="M208.49 191.51a12 12 0 0 1-17 17L128 145l-63.51 63.49a12 12 0 0 1-17-17L111 128L47.51 64.49a12 12 0 0 1 17-17L128 111l63.51-63.52a12 12 0 0 1 17 17L145 128Z"/></svg>
                    </button>
                </div>
            </div>
            {% endfor %}
        </div><!--end row-->
        {% else %}
        <div class="w-100 text-center">
            <span>No se encontró notificaciones</span>
        </div>
        {% endif %}
        <!-- FIN -->
        
    </div> <!-- container-fluid -->
{% endblock %}

{% block main_link_js %}
    <script src="{{ url_for('static', filename='js/notificationsController.js') }}"></script>
    <script>
        const notifications= new NotificationsController();
        notifications.approveRequest();
        notifications.rejectRequest();
        notifications.deleteRequest();
        
    </script>
{% endblock %}