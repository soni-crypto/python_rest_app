{% extends "layouts/nav_app_honey.html" %}

{% block main_link_css %}
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/styles_restaurant/folder_app.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/ui/button-create.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/styles_restaurant/view_food.css') }}">
{% endblock %}

{% block main_body %}
    <section class="container-all-view-food">
        <nav class="breadcrumb" aria-label="breadcrumbs">
            <ul>
                <li><a href="/honey/typefoodroute"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="#485fc7" d="m9.55 12l7.35 7.35q.375.375.363.875t-.388.875t-.875.375t-.875-.375l-7.7-7.675q-.3-.3-.45-.675t-.15-.75t.15-.75t.45-.675l7.7-7.7q.375-.375.888-.363t.887.388t.375.875t-.375.875z"/></svg> Categoría</a></li>
                <li class="is-active"><a href="" aria-current="page">{{ type_food_data.name_type }}</a></li>
            </ul>
        </nav>
        
        <div class="container-main-options-and-filter">
            <div class="btn-create-ui-main-template__ui-div-ctn">
                <button class="btn-create-ui-main-template" id="btn-create-ui-main-template">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 11h-6V5a1 1 0 0 0-2 0v6H5a1 1 0 0 0 0 2h6v6a1 1 0 0 0 2 0v-6h6a1 1 0 0 0 0-2Z"/></svg>
                    <span>
                        Nuevo plato
                    </span>
                </button> 
            </div>
        </div>
        {% if dataFood %}
        <div class="container-all-of-folder-block__one">
            {% for data in dataFood %}
                <div class="container-all-of-folder-block__block-main" data-type="{{ data.name_type }}">
                    <div class="block-main__header">
                        <div class="block-main__header-text">
                            {% if data.state == 1 %}
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="#585b74" d="M12 9a3 3 0 0 0-3 3a3 3 0 0 0 3 3a3 3 0 0 0 3-3a3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5a5 5 0 0 1 5-5a5 5 0 0 1 5 5a5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5Z"/></svg>
                            {% else %}
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 256 256"><path fill="#585b74" d="M53.92 34.62a8 8 0 1 0-11.84 10.76l19.24 21.17C25 88.84 9.38 123.2 8.69 124.76a8 8 0 0 0 0 6.5c.35.79 8.82 19.57 27.65 38.4C61.43 194.74 93.12 208 128 208a127.11 127.11 0 0 0 52.07-10.83l22 24.21a8 8 0 1 0 11.84-10.76Zm89 121.69a32 32 0 0 1-41.67-45.85Zm104.39-25.05c-.42.94-10.55 23.37-33.36 43.8a8 8 0 0 1-11.26-.57L101.4 63.07a8 8 0 0 1 4.6-13.28A134 134 0 0 1 128 48c34.88 0 66.57 13.26 91.66 38.35c18.83 18.83 27.3 37.62 27.65 38.41a8 8 0 0 1 0 6.5Z"/></svg>
                            {% endif %}
                            <span>{{ data.name_type }}</span>
                        </div>
                        <div class="block-main__header-more">
                            <button>
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="none" stroke="#585b74" stroke-linejoin="round" stroke-width="3.75" d="M12 12h.01v.01H12zm0-7h.01v.01H12zm0 14h.01v.01H12z"/></svg>
                            </button>
                            <div class="block-main__header-more-data">
                                
                                <button class="btn-edit-more-data" data-identifier="{{ data.id }}">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="blueviolet" class="bi bi-pencil-square" viewBox="0 0 16 16"><path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/><path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"/></svg>
                                </button>
                                <button class="btn-del-more-data" data-identifier="{{ data.id }}">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#190d28" class="bi bi-trash3-fill" viewBox="0 0 16 16"><path d="M11 1.5v1h3.5a.5.5 0 0 1 0 1h-.538l-.853 10.66A2 2 0 0 1 11.115 16h-6.23a2 2 0 0 1-1.994-1.84L2.038 3.5H1.5a.5.5 0 0 1 0-1H5v-1A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5Zm-5 0v1h4v-1a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5ZM4.5 5.029l.5 8.5a.5.5 0 1 0 .998-.06l-.5-8.5a.5.5 0 1 0-.998.06Zm6.53-.528a.5.5 0 0 0-.528.47l-.5 8.5a.5.5 0 0 0 .998.058l.5-8.5a.5.5 0 0 0-.47-.528ZM8 4.5a.5.5 0 0 0-.5.5v8.5a.5.5 0 0 0 1 0V5a.5.5 0 0 0-.5-.5Z"/></svg>
                                </button>
                                {% if data.state==0 %}
                                    <button class="btn-lock-more-data" data-identifier="{{ data.id }}" data-state="{{ data.state }}">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 256 256"><path fill="#585b74" d="M53.92 34.62a8 8 0 1 0-11.84 10.76l19.24 21.17C25 88.84 9.38 123.2 8.69 124.76a8 8 0 0 0 0 6.5c.35.79 8.82 19.57 27.65 38.4C61.43 194.74 93.12 208 128 208a127.11 127.11 0 0 0 52.07-10.83l22 24.21a8 8 0 1 0 11.84-10.76Zm89 121.69a32 32 0 0 1-41.67-45.85Zm104.39-25.05c-.42.94-10.55 23.37-33.36 43.8a8 8 0 0 1-11.26-.57L101.4 63.07a8 8 0 0 1 4.6-13.28A134 134 0 0 1 128 48c34.88 0 66.57 13.26 91.66 38.35c18.83 18.83 27.3 37.62 27.65 38.41a8 8 0 0 1 0 6.5Z"/></svg>
                                    </button>
                                {% elif data.state==1 %}
                                    <button class="btn-lock-more-data" data-identifier="{{ data.id }}" data-state="{{ data.state }}">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="116" viewBox="0 0 24 24"><path fill="#585b74" d="M12 9a3 3 0 0 0-3 3a3 3 0 0 0 3 3a3 3 0 0 0 3-3a3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5a5 5 0 0 1 5-5a5 5 0 0 1 5 5a5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5Z"/></svg>
                                    </button>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    <div class="block-main__body">
                        <div class="block-main__body-icon">
                            <img src="{{ data.image }}" alt="">                       
                        </div>
                        <div class="block-main__body-text">
                            <div class="block-main__body-text-parts-name">
                                <span>{{ data.name }}</span>
                            </div>
                            <div class="block-main__body-text-parts">
                                <span>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 14 14"><path fill="none" stroke="#4c238b" stroke-linecap="round" stroke-linejoin="round" d="m13.25 9.36l-3.89 3.89a.75.75 0 0 1-1.06 0L1.79 6.74a.36.36 0 0 1-.11-.29l.59-3.84a.37.37 0 0 1 .34-.34l3.84-.59a.36.36 0 0 1 .29.11l6.51 6.51a.75.75 0 0 1 0 1.06ZM4.03 4.03L.53.53"/></svg>
                                    {{ admin_settings.currency }}
                                    {{data.price}}
                                </span>
                                {% if data.product_code %}
                                <span>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 16 16"><path fill="#161c41" fill-rule="evenodd" d="M9.22 14.03a.75.75 0 0 0 1.06-1.06l-.47-.47H10a3 3 0 0 0 1.507-.405A3 3 0 0 0 13 9.5V6.896h.003a2.7 2.7 0 0 0 .785-.366a2.75 2.75 0 1 0-2.288.366V9.5A1.5 1.5 0 0 1 10 11h-.19l.47-.47a.75.75 0 0 0-1.06-1.06l-.47.47l-1.28 1.28a.75.75 0 0 0 0 1.06zM5.72 1.97a.75.75 0 0 1 1.06 0l.47.47l1.28 1.28a.75.75 0 0 1 0 1.06L6.78 6.53a.751.751 0 0 1-1.06-1.06L6.19 5H6a1.5 1.5 0 0 0-1.5 1.5v2.604a2.76 2.76 0 0 1 2 2.646a2.74 2.74 0 0 1-1.212 2.28l-.094.061A2.747 2.747 0 0 1 1 11.75a2.75 2.75 0 0 1 2-2.646V6.5a3 3 0 0 1 3-3h.19l-.47-.47a.75.75 0 0 1 0-1.06m-.908 9.121A1.25 1.25 0 0 1 5 11.75a1.25 1.25 0 1 1-.188-.659M11 4.25a1.25 1.25 0 1 1 2.5 0a1.25 1.25 0 0 1-2.5 0" clip-rule="evenodd"/></svg>
                                    {{ data.product_code }}
                                </span>
                                {% endif %}
                            </div>
                            <div class="block-main__body-text-parts">
                                <div class="block-main-description-food"><span>{{ data.description }}</span></div>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="container-not-found-empty">
            <span>Lista de platos vacío</span>
        </div>
        {% endif %}

    </section>
    <!-- MESSAGE ALERTS AND INFO -->
    
    <!-- Modals All crud -->
    <!-- modal create -->
     <div class="modal" id="modal-create">
        <div class="modal-background"></div>
        <div class="modal-content">
            <div class="modal-title">
                <h1>Nuevo plato</h1>
            </div>
            <form action="createfood" method="post" enctype="multipart/form-data">
                <div class="block-content">
                    <label for="name" class="">Nombre*</label>
                    <input type="text" name="name" class="" id="name" placeholder="" required>
                </div> 
                <div class="block-content">
                    <label for="product_code" class="form-label">Código de conexión al inventario</label>
                    <input type="text" value="" name="product_code" id="product_code" maxlength="50" class="">
                </div>
                <div class="block-content">
                    <label for="price" class="form-label">Precio*</label>
                    <input type="text" name="price" id="price" class="" maxlength="5" required>
                </div>
                <div class="block-content">
                    <label for="preparation_time" class="form-label">Tiempo de preparación</label>
                    <input type="number" value="0" name="preparation_time" id="preparation_time" class="" >
                </div>
                <div class="block-content-col-full block-content">
                    <label for="description" class="">Descripción</label>
                    <textarea name="description" class="" id="description"></textarea>
                </div>
                <input type="hidden" name="type_food" value="{{ type_food_data.id }}">
                <div class="block-content-image block-content">
                    <label for="image" class="">Imagen</label>
                    <input type="hidden" name="image" id="image">
                    <input type="text" name="input-search" class="image_name_search_input form-control">
                    <div class="container-all-image-renderer-search-user">
                    </div>
                </div>
                <div class="block-content-btn">
                    <button class="" type="submit" onclick="document.getElementById('btn-create-order-form').textContent='Guardando...' " id="btn-create-order-form">Guardar</button>
                </div>
            </form>
        </div>
        <button class="modal-close is-large"></button>
    </div>
    <!-- modal edit -->
     <div class="modal" id="modal-edit">
        <div class="modal-background"></div>
        <div class="modal-content">
            <div class="modal-title">
                <h1>Actualizar plato</h1>
            </div>
            <form>
                <div class="block-content">
                    <label for="name-edit" class="">Nombre*</label>
                    <input type="text" name="name-edit" class="" id="name-edit" placeholder="" required>
                </div>
                <div class="block-content">
                    <label for="product_code-edit" class="form-label">Código de conexión al inventario</label>
                    <input type="text" value="" name="product_code-edit" id="product_code-edit" maxlength="50" class="">
                </div>
                <div class="block-content">
                    <label for="price-edit" class="">Precio*</label>
                    <input type="text" name="price-edit" id="price-edit" maxlength="5" class="" required>
                </div>
                <div class="block-content">
                    <label for="preparation_time-edit" class="form-label">Tiempo de preparación</label>
                    <input type="number" value="0" name="preparation_time-edit" id="preparation_time-edit" class="" >
                </div>
                <div class="block-content-col-full block-content">
                    <label for="description-edit" class="form-label">Descripción</label>
                    <textarea name="description-edit" class="" id="description-edit"></textarea>
                </div>
                <input type="hidden" name="type_food-edit" id="type_food-edit" value="{{ type_food_data.id }}">
                <div class="block-content-image block-content">
                    <label for="image-edit" class="">Imagen</label>
                    <input type="hidden" name="image" id="image-edit" required>
                    <input type="text" name="input-search" class="image_name_search_input form-control" required>
                    <div class="container-all-image-renderer-search-user"></div>
                </div>
                <div class="block-content-btn">
                    <button class="" id="btn-confirm-update" type="button">Actualizar</button>
                </div>
            </form>
        </div>
        <button class="modal-close is-large"></button>
     </div>
    <!-- modal delete -->
     <div class="modal" id="modal-delete">
        <div class="modal-background"></div>
        <div class="modal-content">
            <div class="modal-title">
                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24"><path fill="#ce2222" d="M17 4v2H3V4h3.5l1-1h5l1 1H17M4 19V7h12v12c0 1.1-.9 2-2 2H6c-1.1 0-2-.9-2-2m15-4h2v2h-2v-2m0-8h2v6h-2V7Z"/></svg>
                <h5 class=""> Confirmar para eliminar</h5>
            </div>
            <div class="btn-confim-action-container">
                <button class="" id="btn-delete-type-food">
                    Eliminar
                </button>
            </div>
        </div>
        <button class="modal-close is-large"></button>
     </div>
    <!-- Modal lock -->
    <div class="modal" id="modal-lock">
        <div class="modal-background"></div>
        <div class="modal-content">
            <div class="modal-title">
                <h5>Confirmar para bloquear</h5>
            </div>
            <div class="btn-confim-action-container">
                <button type="button" class="" id="btn-lock-update-save">Desactivar</button>
            </div>
        </div>
        <button class="modal-close is-large"></button>
    </div>
    <!-- Fin modals -->
{% endblock %}
{% block main_link_js %}
    <script src="{{ url_for('static', filename='js/FoodController.js') }}"></script>
    <script src="{{ url_for('static', filename='js/controller_images_input.js') }}"></script>
    <script>
        const foodController = new FoodController();
        foodController.createFood();
        foodController.deleteFood();
        foodController.updateStateFood();
        foodController.editFood();

        image_input_controll();
    </script>
{% endblock %}